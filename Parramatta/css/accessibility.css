<script type="cartocss/text" id="cartocss">
  /** torque visualization */
     @input: 42;
     @weight: 1;

     Map {
      -torque-frame-count:1;
      -torque-animation-duration:1;
      -torque-time-attribute:"time";
      // -torque-aggregation-function:"("+@weight+"*(1+(("+ @input+"-avg(one_time))/(45-40))))+(3*(1+((7-avg(two_time))/(11-7))))";
      // -torque-aggregation-function:"avg(r3_hospital)+avg(r3_primaryschools)+avg(r3_railstation)+avg(r3_re1)+avg(r3_shoppingcentr)";
      -torque-aggregation-function:"(avg(r3_railstation)/(15-0))+(avg(r3_shoppingcentr)/(20-0))+(avg(r3_re1)/(5-0))+(avg(r3_primaryschools)/(13-9))+(avg(r3_hospital)/(9-0))*3";
      -torque-resolution:8;
      -torque-data-aggregation:linear;
      }

     #parra_grid2{
        // image-filters: colorize-alpha(cyan, lightgreen, yellow , orange, red);
        // marker-file: url("http://s3.amazonaws.com/com.cartodb.assets.static/alphamarker.png");
        comp-op: lighten;
        marker-fill-opacity: 0.85;
        marker-line-color: #FFF;
        marker-line-width: 0;
        marker-line-opacity: 0.7;
        marker-type: ellipse;
        // marker-width:[value];
        marker-width:3.5;
        marker-fill: #FF9900;
    }
    #parra_grid2[frame-offset=1] {
        marker-width:7;
        marker-fill-opacity:0.45; 
    }

    #parra_grid2[value>=0.5] {
       marker-fill: #a50026;
    }
    #parra_grid2[value>=1] {
       marker-fill: #d73027;
    }
    #parra_grid2[value>=1.5] {
       marker-fill: #f46d43;
    }
    #parra_grid2[value>=2] {
       marker-fill: #fdae61;
    }
    #parra_grid2[value>=2.5] {
       marker-fill: #fee090;
    }
    #parra_grid2[value>=3] {
       marker-fill: #e0f3f8;
    }
    #parra_grid2[value>=3.5] {
       marker-fill: #abd9e9;
    }
    #parra_grid2[value>=4] {
       marker-fill: #74add1;
    }
    #parra_grid2[value>=4.5] {
       marker-fill: #4575b4;
    }
    #parra_grid2[value>=5] {
       marker-fill: #313695;
    }




    </script>